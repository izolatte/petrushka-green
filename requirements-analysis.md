# Задание 1: Анализ требований
1. Пользователь может добавить в корзину от 1 до 10 единиц одного товара.
2. Пользователь может изменить количество каждого товара в корзине не менее, чем до 1-го. Для удаления товара из корзины используется отдельная кнопка.
3. В корзине может находиться не более 5 различных товаров.
4. Суммарное количество всех товаров в корзине не может превышать 20 штук.
5. Товары в корзине могут быть разные.
6. При попытке добавить товар, превышающий лимиты, система показывает сообщение: "Лимит корзины превышен".
7. Цена на продукт фиксируется на момент добавления в корзину и не меняется.
8. На странице корзины отображается список товаров, их количество, цена за единицу и общая стоимость позиции.
9. Если пользователь уменьшает количество товара до 0, товар удаляется из корзины.
10. В корзине может быть реклама других продуктов.
11. Реклама товаров в корзине должна быть каждый будний день по утрам и вечерам.
13. Если цена на товар изменилась в каталоге, система должна автоматически обновить ее в корзине у всех пользователей.

### Несостыковки:
- 2 и 9 пункт - явное противоречие, необходимо уточнить, какой функционал в итоге оставляем 
- 1, 3 и 4 пункт потенциально противоречат друг другу. Если пользователь набрал 5 различных позиций, он не сможет набрать 10 единиц по каждой из них. При этом пользователю будет отображаться одно и то же сообщение о превышении лимитов, как в ситуации, если он будет пытаться добавить более 5 различных позиций, так и в случае превышения общего количества товаров (20 штук).
- 7 и 13 пункты - явное противоречие, необходимо уточнить, какой вариант оставляем
- 5 пункт - неинформативное требование
- Пункты 10 и 11 потенциально противоречат друг другу. Необходимо уточнить, опциональная ли реклама или все же обязательна
- Пропущен пункт 12?

### Уточнения:
- Что такое «разный товар»? Это разные позиции или может быть один и тот же товар, но с разными характеристиками (размер, цвет, производитель)?
- В чем причина маленького лимита различных товаров (5 штук)? Возможно ли увеличить лимиты?
- В чем причина маленького лимита суммарного количества всех товаров (20 штук)? Данный лимит немного противоречит другим ограничениям на количество товаров (пользователь не может добавить 5 различных позиций по 10 товаров в каждой).
- Для удаления товара из корзины используется отдельная кнопка или пользователь все таки может уменьшить количество товара до 0, что удалит его из корзины? Или может бы и кнопка и удаление через уменьшение одновременно?
- Реклама каких продуктов должна быть размещена в корзине? Это новинки, специальные предложения или условная «лента рекомендаций» на основе интересов клиента? В каком виде должна отображаться реклама?
- Почему реклама только по будням по утрам и вечерам? Какое точное время отображения рекламы и часовой пояс?
- Должна ли цена фиксироваться при добавлении товара в корзину или она изменяется при изменении цены в каталоге? При оформлении заказа цена пересчитывается? Есть ли ограничения по времени фиксации цены при добавлении в корзину (условно на 15 минут после добавления цена фиксируется, дальше просим обновить корзину)?
- Если пользователь открыл корзину на телефоне и на ноуте и меняет количество одновременно, то какой версии верим?

## Обновленное ТЗ

### Визуальное представление:
На странице корзины должны быть отображены: список товаров, их количество, цена за единицу и общая стоимость позиции.
- У каждой позиции есть: название, фото, цена, количество, сумма, кнопки для уменьшения и увеличения количества (+/-) и отдельная кнопка «Удалить»
- При ошибке показываем всплывающее уведомление (toast) с соответствующим текстом
- Есть состояние «корзина пуста»

### Ограничения корзины
В корзине существуют ограничения на количество товара:
- Не более 5 различных позиций
- Не более 10 единиц товара по каждой позиции
- Суммарное количество всех товаров в корзине не может превышать 20 штук (требует подтверждения бизнесом)
- Пользователь может уменьшить количество товара до 0, в таком случае товар удаляется из корзины (также товар может быть удален через отдельную кнопку)

В случае превышения лимитов должны отображаться уведомления:
- При превышении лимита по различным позициям (не более 5) отображать «Разрешено не более 5 различных позиций»
- При превышении лимита по количеству товара в одной позиции (не более 10) отображать «Разрешено не более 10 товаров одного вида»
- В случае, если суммарное количество всех товаров в корзине не может превышать 20 штук, отображать «Разрешено не более 20 товаров». Это ограничение применяется одновременно с остальными. То есть при попытке превысить общий лимит 20 система отклоняет операцию и показывает предупреждение.
- При превышении лимитов изменение количества не применяется, корзина остаётся в предыдущем состоянии и отображается предупреждение с соответствующим текстом

Ограничения применяются при добавлении товара и при изменении количества в корзине.

Если нарушено несколько ограничений, система показывает сообщение для того ограничения, которое относится к действию пользователя:
- добавляет новый товар → проверяем лимит различных позиций
- увеличивает количество существующего → проверяем лимит количества на одну позицию (не более 10) и общий лимит (не более 20)

При добавлении продукта в корзину его цена фиксируется и не меняется несмотря на изменения в каталоге. Цена фиксируется для позиции целиком, то есть при изменении количества (добавление +1 товара, который уже лежит в корзине) цена за единицу остаётся такой же, как при первом добавлении этой позиции. Далее эта цена используется для расчета	суммы позиции и «итого» по корзине.

### Операции корзины
Добавление товара в корзину
- вход: productId, quantity
- проверка лимитов
- результат: товар добавлен / ошибка

Изменение количества
- вход: cartItemId (или productId), новое количество 
- проверка лимитов
- результат: количество изменено / ошибка

Удаление
- удаление по кнопке «Удалить»
- или удаление при quantity = 0 (если оставляем так)

### Дополнительный функционал
В корзине должна отображаться реклама товаров по специальным предложениям. Реклама должна появляться только в будние дни по утрам и вечерам. Требования к рекламе: отображается блок рекомендаций, если текущее время входит в определенные интервалы по часовому поясу клиента, иначе блок скрыт/пустой. Интервалы времени задаются бизнесом, по умолчанию: утро 8-11, вечер 16-20 (требует подтверждения бизнесом)
